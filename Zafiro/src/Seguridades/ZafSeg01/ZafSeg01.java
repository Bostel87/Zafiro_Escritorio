/*
 * ZafSeg01.java
 *
 * Created on 17 de octubre de 2004, 05:36 PM
 * v0.7
 */
package Seguridades.ZafSeg01;
import Librerias.ZafParSis.ZafParSis;
import Librerias.ZafUtil.ZafUtil;

/**
 *
 * @author  Eddye Lino
 */
public class ZafSeg01 extends javax.swing.JFrame
{
    private ZafParSis objParSis;
    private ZafUtil objUti;
    
    /** Crea una nueva instancia de la clase ZafSeg01. */
    public ZafSeg01()
    {
        initComponents();
        //Inicializar objetos.
        objParSis=new ZafParSis();
        objUti=new ZafUtil();
        if (!configurarFrm())
            exitForm();
        //Activar el LookAndFeel.
        Librerias.ZafProMetThe.ZafProMetThe objProMetThe = new Librerias.ZafProMetThe.ZafProMetThe(objParSis, "ZafTem00.theme");
        javax.swing.plaf.metal.MetalLookAndFeel.setCurrentTheme(objProMetThe);
        try
        {
            javax.swing.UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
            javax.swing.SwingUtilities.updateComponentTreeUI(this);
        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblTit = new javax.swing.JLabel();
        panCen = new javax.swing.JPanel();
        lblEmp = new javax.swing.JLabel();
        cboEmp = new javax.swing.JComboBox();
        panBot = new javax.swing.JPanel();
        butAce = new javax.swing.JButton();
        butCan = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        setTitle("Zafiro v0.7");
        setResizable(false);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        lblTit.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTit.setText("Listado de empresas");
        lblTit.setPreferredSize(new java.awt.Dimension(98, 20));
        getContentPane().add(lblTit, java.awt.BorderLayout.NORTH);

        panCen.setLayout(new java.awt.BorderLayout(10, 0));

        lblEmp.setText("Empresa:");
        panCen.add(lblEmp, java.awt.BorderLayout.WEST);

        cboEmp.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                cboEmpKeyReleased(evt);
            }
        });
        panCen.add(cboEmp, java.awt.BorderLayout.CENTER);

        getContentPane().add(panCen, java.awt.BorderLayout.CENTER);

        panBot.setLayout(new java.awt.GridLayout(1, 2));

        butAce.setMnemonic('A');
        butAce.setText("Aceptar");
        butAce.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                butAceActionPerformed(evt);
            }
        });
        butAce.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                butAceKeyPressed(evt);
            }
        });
        panBot.add(butAce);

        butCan.setMnemonic('C');
        butCan.setText("Cancelar");
        butCan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                butCanActionPerformed(evt);
            }
        });
        butCan.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                butCanKeyPressed(evt);
            }
        });
        panBot.add(butCan);

        getContentPane().add(panBot, java.awt.BorderLayout.SOUTH);

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-400)/2, (screenSize.height-100)/2, 400, 100);
    }// </editor-fold>//GEN-END:initComponents

    private void cboEmpKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cboEmpKeyReleased
        if (evt.getKeyCode()==evt.VK_ENTER)
            butAceActionPerformed(null);
    }//GEN-LAST:event_cboEmpKeyReleased

    private void butCanKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_butCanKeyPressed
        if (evt.getKeyCode()==evt.VK_ENTER)
            butCanActionPerformed(null);
    }//GEN-LAST:event_butCanKeyPressed

    private void butAceKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_butAceKeyPressed
        if (evt.getKeyCode()==evt.VK_ENTER)
            butAceActionPerformed(null);
    }//GEN-LAST:event_butAceKeyPressed

    private void butCanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butCanActionPerformed
        exitForm(null);
    }//GEN-LAST:event_butCanActionPerformed

    private void butAceActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butAceActionPerformed
        objParSis.setFilaSeleccionada(cboEmp.getSelectedIndex()+1);
        ZafSeg01_01 objSeg=new ZafSeg01_01(objParSis);
        objSeg.show();
        this.dispose();
    }//GEN-LAST:event_butAceActionPerformed
    
    /** Cerrar la aplicación. */
    private void exitForm(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_exitForm
        String strTit, strMsg;
        javax.swing.JOptionPane oppMsg=new javax.swing.JOptionPane();
        strTit="Mensaje del sistema Zafiro";
        strMsg="¿Está seguro que desea cerrar este programa?";
        if (oppMsg.showConfirmDialog(this,strMsg,strTit,javax.swing.JOptionPane.YES_NO_OPTION,javax.swing.JOptionPane.QUESTION_MESSAGE)==javax.swing.JOptionPane.YES_OPTION)
        {
            dispose();
            System.exit(0);
        }
    }//GEN-LAST:event_exitForm

    /** Cerrar la aplicación. */
    private void exitForm() 
    {
        dispose();
        System.exit(0);
    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        new ZafSeg01();
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton butAce;
    private javax.swing.JButton butCan;
    private javax.swing.JComboBox cboEmp;
    private javax.swing.JLabel lblEmp;
    private javax.swing.JLabel lblTit;
    private javax.swing.JPanel panBot;
    private javax.swing.JPanel panCen;
    // End of variables declaration//GEN-END:variables
    
    /** Configurar el formulario. */
    private boolean configurarFrm()
    {
        boolean blnRes=true;
        try
        {
            //java.util.Locale.setDefault(java.util.Locale.US);
            java.util.Locale.setDefault(new java.util.Locale("es", "ec"));
            //Si existe una empresa predeterminada ir al "login" caso contrario mostrar ésta ventana.
            if (!objParSis.getEmpresaPredeterminada().equals(""))
            {
                objParSis.setFilaSeleccionada(Integer.parseInt(objParSis.getEmpresaPredeterminada())+1);
                ZafSeg01_01 objSeg=new ZafSeg01_01(objParSis);
                objSeg.setVisible(true);
                this.dispose();
            }
            else
            {
                //Llenar el combo de empresas.
                for(byte i=1;i<objParSis.getNumeroFilas();i++)
                {
                    cboEmp.addItem(objParSis.getNombreEmpresa(i));
                }
                this.show();
            }
        }
        catch(Exception e)
        {
            blnRes=false;
        }
        return blnRes;
    }
    
}
